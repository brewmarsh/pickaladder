{% extends "layout.html" %}
{% block title %}Find Friends{% endblock %}
{% block content %}
<div class="container">
    <h2>Find Friends</h2>
        <form method="get" action="{{ url_for('user.users') }}">
            <input type="text" name="search" placeholder="Search by username or name" value="{{ search_term }}">
            <input type="submit" value="Search">
        </form>
        <h3>Friends of Friends</h3>
        <div class="users-list">
            <table>
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Name</th>
                        <th>DUPR Rating</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in fof %}
                        <tr>
                            <td>{{ user.username }}</td>
                            <td>{{ user.name }}</td>
                            <td>{{ user.dupr_rating }}</td>
                            <td><a href="{{ url_for('user.add_friend', friend_id=user.id) }}" class="btn btn-primary btn-sm">Add Friend</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <h3>All Users</h3>
        <div class="users-list">
            <table>
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Name</th>
                        <th>DUPR Rating</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in all_users %}
                        <tr>
                            <td><img src="{{ url_for('user.profile_picture_thumbnail', user_id=user.id) }}" alt="Profile Picture" width="30" height="30" style="border-radius: 50%;"></td>
                            <td>{{ user.username }}</td>
                            <td>{{ user.name }}</td>
                            <td>{{ user.dupr_rating }}</td>
                            <td>
                                <a href="{{ url_for('user.add_friend', friend_id=user.id) }}" class="btn btn-primary btn-sm">Add Friend</a>
                                {% if session['is_admin'] %}
                                    <a href="{{ url_for('admin.delete_user', id=user.id) }}" class="btn btn-danger btn-sm">Delete</a>
                                    <a href="{{ url_for('admin.promote_user', id=user.id) }}" class="btn btn-warning btn-sm">Promote</a>
                                    <a href="{{ url_for('admin.admin_reset_password', id=user.id) }}" class="btn btn-info btn-sm">Reset Password</a>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% include 'footer.html' %}
{% endblock %}
</body>
</html>
