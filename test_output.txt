warning: No `requires-python` value found in the workspace. Defaulting to `>=3.12`.
============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0 -- /app/.venv/bin/python
cachedir: .pytest_cache
rootdir: /app
configfile: pyproject.toml
plugins: base-url-2.1.0, flask-1.3.0, mock-3.15.1, Faker-40.4.0, playwright-0.7.2, anyio-4.12.1
collecting ... collected 6 items

tests/test_match.py::MatchRoutesFirebaseTestCase::test_pending_invites_query_uses_correct_field PASSED [ 16%]
tests/test_match.py::MatchRoutesFirebaseTestCase::test_record_match PASSED [ 33%]
tests/test_match.py::MatchRoutesFirebaseTestCase::test_record_match_page_load PASSED [ 50%]
tests/test_match.py::MatchRoutesFirebaseTestCase::test_record_match_rematch_param PASSED [ 66%]
tests/test_match.py::MatchRoutesFirebaseTestCase::test_view_match_summary FAILED [ 83%]
tests/test_match.py::MatchRoutesFirebaseTestCase::test_view_match_summary_doubles FAILED [100%]

=================================== FAILURES ===================================
_____________ MatchRoutesFirebaseTestCase.test_view_match_summary ______________

self = <tests.test_match.MatchRoutesFirebaseTestCase testMethod=test_view_match_summary>
mock_get_match = <MagicMock name='get_match_by_id' id='139790456415504'>

    @patch("pickaladder.match.routes.MatchService.get_match_by_id")
    def test_view_match_summary(self, mock_get_match: MagicMock) -> None:
        """Test viewing the match summary page."""
        self._set_session_user()
        mock_match_id = "match_123"

        mock_get_match.return_value = {
            "id": mock_match_id,
            "matchType": "singles",
            "player1Score": 11,
            "player2Score": 5,
            "player1Ref": MagicMock(id=MOCK_USER_ID),
            "player2Ref": MagicMock(id=MOCK_OPPONENT_ID),
            "matchDate": datetime.datetime.now(),
        }

        # Mock participant fetching
        mock_db = self.mock_firestore_service.client.return_value
        mock_user_doc = mock_db.collection("users").document.return_value
        mock_user_snapshot = MagicMock()
        mock_user_snapshot.exists = True
        mock_user_snapshot.to_dict.return_value = MOCK_USER_DATA
        mock_user_doc.get.return_value = mock_user_snapshot

        response = self.client.get(
            f"/match/summary/{mock_match_id}", headers=self._get_auth_headers()
        )
        self.assertEqual(response.status_code, 200)
        self.assertIn(b"Match Summary", response.data)
>       self.assertIn(b"11 - 5", response.data)
E       AssertionError: b'11 - 5' not found in b'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta name="csrf-token" content="ImVlZmQ1YzRhOWJmYTc4OTQyOTNkMDg3ZWQ3MGU0Y2MyNzU4NTJiZWUi.aYux2w._iJOwV8pcDOZFZ5zGra68jYwUTE">\n    <title>pickaladder - Match Summary</title>\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link\n        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&display=swap"\n        rel="stylesheet">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n    <link rel="icon" href="/static/pickaladder_logo_64.png" type="image/png" sizes="64x64">\n    <link rel="icon" href="/static/pickaladder_logo_128.png" type="image/png"\n        sizes="128x128">\n    <link rel="icon" href="/static/pickaladder_logo_256.png" type="image/png"\n        sizes="256x256">\n    <link rel="icon" href="/static/pickaladder_logo_512.png" type="image/png"\n        sizes="512x512">\n    <link rel="stylesheet" href="/static/css/variables.css">\n    <link rel="stylesheet" href="/static/css/layout.css">\n    <link rel="stylesheet" href="/static/css/components.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">\n    <link rel="stylesheet" href="/static/style.css">\n    <link rel="stylesheet" href="/static/dark.css">\n    <link rel="stylesheet" href="/static/mobile.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n</head>\n\n<body >\n    \n\n<header class="header">\n    <div class="container">\n        <!-- Mobile Header -->\n        <div class="d-flex justify-content-between align-items-center d-lg-none w-100">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <button class="hamburger-menu">\n                <span></span>\n                <span></span>\n                <span></span>\n            </button>\n        </div>\n\n        <!-- Desktop Navbar -->\n        <nav class="navbar d-none d-lg-flex">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <div class="navbar-menu">\n                \n                <a href="/user/dashboard"\n                    class="nav-link ">\xf0\x9f\x93\x88 Dashboard</a>\n                <a href="/user/community"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8c\x8d Community\n                    \n                </a>\n                <a href="/group/"\n                    class="nav-link ">\xf0\x9f\x91\xa8\xe2\x80\x8d\xf0\x9f\x91\xa9\xe2\x80\x8d\xf0\x9f\x91\xa7\xe2\x80\x8d\xf0\x9f\x91\xa6 Groups</a>\n                <a href="/tournaments/"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8e\xbe Tournaments\n                    \n                </a>\n                <a href="/match/leaderboard"\n                    class="nav-link ">\xf0\x9f\x8f\x86 Leaderboard</a>\n                \n            </div>\n            <div class="navbar-user-controls">\n                \n                <div class="dropdown">\n                    <button class="dropbtn">\n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Profile Picture" class="avatar avatar-sm"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                    </button>\n                    <div class="dropdown-content">\n                        <a href="/user/winner_uid">\xf0\x9f\x91\xa4 My Profile</a>\n                        <a href="/auth/change_password">\xf0\x9f\x94\x91 Settings / Change Password</a>\n                        \n                        <div class="dropdown-divider"></div>\n                        <a href="/auth/logout">\xf0\x9f\x9a\xaa Logout</a>\n                    </div>\n                </div>\n                \n            </div>\n        </nav>\n        <div id="myLinks" class="mobile-nav d-lg-none">\n            \n            <a href="/user/dashboard" class="mobile-nav-link"><i class="fas fa-home me-2"></i> Dashboard</a>\n            <a href="/user/community" class="mobile-nav-link"><i class="fas fa-users me-2"></i> Community</a>\n            <a href="/group/" class="mobile-nav-link"><i class="fas fa-layer-group me-2"></i> Groups</a>\n            <a href="/tournaments/" class="mobile-nav-link"><i class="fas fa-trophy me-2"></i> Tournaments</a>\n            <a href="/match/leaderboard" class="mobile-nav-link"><i class="fas fa-chart-line me-2"></i> Leaderboard</a>\n            <div class="mobile-nav-divider"></div>\n            <a href="/user/winner_uid" class="mobile-nav-link"><i class="fas fa-user me-2"></i> My Profile</a>\n            <a href="/auth/change_password" class="mobile-nav-link"><i class="fas fa-cog me-2"></i> Settings</a>\n            \n            <a href="/auth/logout" class="mobile-nav-link"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>\n            \n        </div>\n    </div>\n</header>\n    <div class="container">\n        <main class="main-content">\n            \n            \n            \n            \n            \n<div class="container">\n    <div class="page-header text-center mb-5">\n        <h1>Match Summary</h1>\n        <p class="text-muted">February 10, 2026</p>\n    </div>\n\n    \n    <!-- Singles View -->\n    <div class="row justify-content-center">\n        \n            \n            \n            \n            \n            \n            \n        \n\n        <div class="col-md-5 mb-4">\n            <div class="card text-center h-100 border-success shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-success mb-3">Winner</div>\n                    <a href="/user/%3CMagicMock%20name=&#39;mock.get().to_dict().id&#39;%20id=&#39;139790455764128&#39;%3E">\n                        <img src="" alt="&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456412384&#39;&gt;"\n                            class="avatar avatar-xl mb-3"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        <h3>&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456412384&#39;&gt;</h3>\n                    </a>\n                    <p class="text-muted">Record: 0 - 0</p>\n                    <div class="score-display score-win">11</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-2 d-flex align-items-center justify-content-center mb-4">\n            <div class="h2 text-muted">VS</div>\n        </div>\n\n        <div class="col-md-5 mb-4">\n            <div class="card text-center h-100 shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-neutral mb-3">Loser</div>\n                    <a href="/user/%3CMagicMock%20name=&#39;mock.get().to_dict().id&#39;%20id=&#39;139790455777296&#39;%3E">\n                        <img src="" alt="&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456103680&#39;&gt;"\n                            class="avatar avatar-xl mb-3"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        <h3>&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456103680&#39;&gt;</h3>\n                    </a>\n                    <p class="text-muted">Record: 0 - 0</p>\n                    <div class="score-display score-loss">5</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-center mt-5">\n        <a href="/match/record?match_type=singles&amp;player1=winner_uid&amp;player2=loser_uid"\n           class="btn btn-volt btn-lg w-auto px-5">Rematch!</a>\n    </div>\n    \n\n    <div class="text-center mt-3">\n        <a href="/user/dashboard" class="btn btn-outline-secondary w-auto px-5">Back to Dashboard</a>\n    </div>\n</div>\n\n<style>\n    .gap-2 { gap: 0.5rem !important; }\n    .border-success { border-color: var(--success-color) !important; border-width: 2px !important; }\n    .score-display { font-size: 3rem; }\n    @media (max-width: 768px) {\n        .col-md-2 { display: none !important; }\n        .score-display { font-size: 2.5rem; }\n    }\n</style>\n\n        </main>\n    </div>\n\n    <footer class="footer mt-auto py-3">\n    <div class="container text-center">\n        <span class="text-muted">\n            &copy; 2026 Pick-A-Ladder \n            <span class="mx-2">|</span>\n            v0.9.33\n        </span>\n    </div>\n</footer>\n\n    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>\n    <script>\n        $(document).ready(function () {\n            $(\'.toast\').toast(\'show\');\n        });\n\n        function showToast(message, category = \'info\', submissionId = null) {\n            const toastContainer = document.querySelector(\'.toast-container\');\n            if (!toastContainer) return;\n\n            const toastId = submissionId || `toast_${Date.now()}`;\n            const autohide = category !== \'info\'; // Don\'t autohide pending toasts\n            const delay = 5000;\n\n            let progressBar = \'\';\n            if (category === \'info\') {\n                progressBar = \'<div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div></div>\';\n            }\n\n            const toastHTML = `\n                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true" ${autohide ? `data-delay="${delay}" data-autohide="true"` : \'\'}>\n                    <div class="toast-header">\n                        <img src="/static/pickaladder_logo_64.png" class="rounded mr-2" alt="Logo" style="width: 20px; height: 20px;">\n                        <strong class="mr-auto">pickaladder</strong>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${message}\n                        ${progressBar}\n                    </div>\n                </div>\n            `;\n            toastContainer.insertAdjacentHTML(\'beforeend\', toastHTML);\n            const newToast = document.getElementById(toastId);\n            $(newToast).toast(\'show\');\n            return toastId;\n        }\n\n        function updateToast(toastId, message, category) {\n            const toastElement = document.getElementById(toastId);\n            if (!toastElement) return;\n\n            const toastBody = toastElement.querySelector(\'.toast-body\');\n\n            // Remove progress bar\n            const progressBar = toastBody.querySelector(\'.progress\');\n            if (progressBar) {\n                progressBar.remove();\n            }\n\n            toastBody.innerHTML = message;\n\n            // Add a retry button for failed submissions\n            if (category === \'danger\') {\n                const retryButton = document.createElement(\'button\');\n                retryButton.className = \'btn btn-sm btn-link\';\n                retryButton.innerText = \'Retry\';\n                retryButton.onclick = function () {\n                    window.optimisticSubmission.retrySubmission(toastId);\n                };\n                toastBody.appendChild(document.createElement(\'br\'));\n                toastBody.appendChild(retryButton);\n            }\n\n            $(toastElement).data(\'autohide\', true);\n            $(toastElement).data(\'delay\', 5000);\n\n            // Hack to restart the autohide timer\n            $(toastElement).toast(\'hide\');\n            $(toastElement).toast(\'show\');\n        }\n\n        document.addEventListener("click", (e) => {\n            const row = e.target.closest(".clickable-row");\n            if (row && row.dataset.href && !e.target.closest("a") && !e.target.closest("button") && !e.target.closest("input")) {\n                window.location.href = row.dataset.href;\n            }\n        });\n\n        const hamburger = document.querySelector(\'.hamburger-menu\');\n        const mobileNav = document.getElementById(\'myLinks\');\n        if (hamburger && mobileNav) {\n            hamburger.addEventListener(\'click\', function () {\n                mobileNav.classList.toggle(\'active\');\n            });\n        }\n    </script>\n\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>\n    <script>\n        const firebaseConfig = {\n            apiKey: "dummy-test-key",\n            authDomain: "pickaladder.firebaseapp.com",\n            projectId: "pickaladder",\n            storageBucket: "pickaladder.appspot.com",\n            messagingSenderId: "402457219675",\n            appId: "1:402457219675:web:a346e2dc0dfa732d31e57e",\n            measurementId: "G-E28CXCXTSK"\n        };\n        // Intercept fetch to add the auth token\n        const originalFetch = window.fetch;\n        window.fetch = function (url, options) {\n            const token = localStorage.getItem(\'firebaseIdToken\');\n            if (token) {\n                options = options || {};\n                options.headers = options.headers || {};\n                options.headers[\'Authorization\'] = \'Bearer \' + token;\n            }\n            return originalFetch(url, options);\n        };\n\n        // Initialize Firebase\n        firebase.initializeApp(firebaseConfig);\n    </script>\n\n    \n</body>\n\n</html>'

tests/test_match.py:207: AssertionError
_________ MatchRoutesFirebaseTestCase.test_view_match_summary_doubles __________

self = <tests.test_match.MatchRoutesFirebaseTestCase testMethod=test_view_match_summary_doubles>
mock_get_match = <MagicMock name='get_match_by_id' id='139790454453312'>

    @patch("pickaladder.match.routes.MatchService.get_match_by_id")
    def test_view_match_summary_doubles(self, mock_get_match: MagicMock) -> None:
        """Test viewing the match summary page for a doubles match."""
        self._set_session_user()
        mock_match_id = "match_doubles"

        p1_ref = MagicMock(id=MOCK_USER_ID)
        p2_ref = MagicMock(id="partner_id")
        opp1_ref = MagicMock(id=MOCK_OPPONENT_ID)
        opp2_ref = MagicMock(id="opponent2_id")

        mock_get_match.return_value = {
            "id": mock_match_id,
            "matchType": "doubles",
            "player1Score": 11,
            "player2Score": 5,
            "team1": [p1_ref, p2_ref],
            "team2": [opp1_ref, opp2_ref],
            "matchDate": datetime.datetime.now(),
        }

        # Mock participant fetching
        mock_db = self.mock_firestore_service.client.return_value

        # Setup mock users
        user_doc = MagicMock()
        user_doc.exists = True
        user_doc.to_dict.return_value = {"name": "Some User"}
        mock_db.get_all.return_value = [user_doc, user_doc]

        response = self.client.get(
            f"/match/summary/{mock_match_id}", headers=self._get_auth_headers()
        )
        self.assertEqual(response.status_code, 200)
        self.assertIn(b"Match Summary", response.data)
>       self.assertIn(b"11 - 5", response.data)
E       AssertionError: b'11 - 5' not found in b'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta name="csrf-token" content="IjQ4YjEyNDg1MDAwZGM3MWVjYTI2Y2JkZWYxNjQwYjhiZWM2Y2E0Mjgi.aYux2w.iMymD4gWv_iX6a02-2PodvF4500">\n    <title>pickaladder - Match Summary</title>\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link\n        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&display=swap"\n        rel="stylesheet">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n    <link rel="icon" href="/static/pickaladder_logo_64.png" type="image/png" sizes="64x64">\n    <link rel="icon" href="/static/pickaladder_logo_128.png" type="image/png"\n        sizes="128x128">\n    <link rel="icon" href="/static/pickaladder_logo_256.png" type="image/png"\n        sizes="256x256">\n    <link rel="icon" href="/static/pickaladder_logo_512.png" type="image/png"\n        sizes="512x512">\n    <link rel="stylesheet" href="/static/css/variables.css">\n    <link rel="stylesheet" href="/static/css/layout.css">\n    <link rel="stylesheet" href="/static/css/components.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">\n    <link rel="stylesheet" href="/static/style.css">\n    <link rel="stylesheet" href="/static/dark.css">\n    <link rel="stylesheet" href="/static/mobile.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n</head>\n\n<body >\n    \n\n<header class="header">\n    <div class="container">\n        <!-- Mobile Header -->\n        <div class="d-flex justify-content-between align-items-center d-lg-none w-100">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <button class="hamburger-menu">\n                <span></span>\n                <span></span>\n                <span></span>\n            </button>\n        </div>\n\n        <!-- Desktop Navbar -->\n        <nav class="navbar d-none d-lg-flex">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <div class="navbar-menu">\n                \n                <a href="/user/dashboard"\n                    class="nav-link ">\xf0\x9f\x93\x88 Dashboard</a>\n                <a href="/user/community"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8c\x8d Community\n                    \n                </a>\n                <a href="/group/"\n                    class="nav-link ">\xf0\x9f\x91\xa8\xe2\x80\x8d\xf0\x9f\x91\xa9\xe2\x80\x8d\xf0\x9f\x91\xa7\xe2\x80\x8d\xf0\x9f\x91\xa6 Groups</a>\n                <a href="/tournaments/"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8e\xbe Tournaments\n                    \n                </a>\n                <a href="/match/leaderboard"\n                    class="nav-link ">\xf0\x9f\x8f\x86 Leaderboard</a>\n                \n            </div>\n            <div class="navbar-user-controls">\n                \n                <div class="dropdown">\n                    <button class="dropbtn">\n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Profile Picture" class="avatar avatar-sm"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                    </button>\n                    <div class="dropdown-content">\n                        <a href="/user/winner_uid">\xf0\x9f\x91\xa4 My Profile</a>\n                        <a href="/auth/change_password">\xf0\x9f\x94\x91 Settings / Change Password</a>\n                        \n                        <div class="dropdown-divider"></div>\n                        <a href="/auth/logout">\xf0\x9f\x9a\xaa Logout</a>\n                    </div>\n                </div>\n                \n            </div>\n        </nav>\n        <div id="myLinks" class="mobile-nav d-lg-none">\n            \n            <a href="/user/dashboard" class="mobile-nav-link"><i class="fas fa-home me-2"></i> Dashboard</a>\n            <a href="/user/community" class="mobile-nav-link"><i class="fas fa-users me-2"></i> Community</a>\n            <a href="/group/" class="mobile-nav-link"><i class="fas fa-layer-group me-2"></i> Groups</a>\n            <a href="/tournaments/" class="mobile-nav-link"><i class="fas fa-trophy me-2"></i> Tournaments</a>\n            <a href="/match/leaderboard" class="mobile-nav-link"><i class="fas fa-chart-line me-2"></i> Leaderboard</a>\n            <div class="mobile-nav-divider"></div>\n            <a href="/user/winner_uid" class="mobile-nav-link"><i class="fas fa-user me-2"></i> My Profile</a>\n            <a href="/auth/change_password" class="mobile-nav-link"><i class="fas fa-cog me-2"></i> Settings</a>\n            \n            <a href="/auth/logout" class="mobile-nav-link"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>\n            \n        </div>\n    </div>\n</header>\n    <div class="container">\n        <main class="main-content">\n            \n            \n            \n            \n            \n<div class="container">\n    <div class="page-header text-center mb-5">\n        <h1>Match Summary</h1>\n        <p class="text-muted">February 10, 2026</p>\n    </div>\n\n    \n    <!-- Doubles View -->\n    <div class="row justify-content-center">\n        \n            \n            \n            \n            \n        \n\n        <div class="col-md-6 mb-4">\n            <div class="card text-center h-100 border-success shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-success mb-3">Winners</div>\n                    <div class="d-flex justify-content-center gap-2 mb-3">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                    </div>\n                    <h3 class="mb-1">Some User & Some User</h3>\n                    <div class="score-display score-win mt-3">11</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-6 mb-4">\n            <div class="card text-center h-100 shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-neutral mb-3">Losers</div>\n                    <div class="d-flex justify-content-center gap-2 mb-3">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                    </div>\n                    <h3 class="mb-1 text-muted">Some User & Some User</h3>\n                    <div class="score-display score-loss mt-3">5</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-center mt-5">\n        <a href="/match/record?match_type=doubles&amp;player1=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player2=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player3=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player4=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E"\n           class="btn btn-volt btn-lg w-auto px-5" data-testid="rematch-btn">Rematch!</a>\n    </div>\n\n    \n\n    <div class="text-center mt-3">\n        <a href="/user/dashboard" class="btn btn-outline-secondary w-auto px-5">Back to Dashboard</a>\n    </div>\n</div>\n\n<style>\n    .gap-2 { gap: 0.5rem !important; }\n    .border-success { border-color: var(--success-color) !important; border-width: 2px !important; }\n    .score-display { font-size: 3rem; }\n    @media (max-width: 768px) {\n        .col-md-2 { display: none !important; }\n        .score-display { font-size: 2.5rem; }\n    }\n</style>\n\n        </main>\n    </div>\n\n    <footer class="footer mt-auto py-3">\n    <div class="container text-center">\n        <span class="text-muted">\n            &copy; 2026 Pick-A-Ladder \n            <span class="mx-2">|</span>\n            v0.9.33\n        </span>\n    </div>\n</footer>\n\n    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>\n    <script>\n        $(document).ready(function () {\n            $(\'.toast\').toast(\'show\');\n        });\n\n        function showToast(message, category = \'info\', submissionId = null) {\n            const toastContainer = document.querySelector(\'.toast-container\');\n            if (!toastContainer) return;\n\n            const toastId = submissionId || `toast_${Date.now()}`;\n            const autohide = category !== \'info\'; // Don\'t autohide pending toasts\n            const delay = 5000;\n\n            let progressBar = \'\';\n            if (category === \'info\') {\n                progressBar = \'<div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div></div>\';\n            }\n\n            const toastHTML = `\n                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true" ${autohide ? `data-delay="${delay}" data-autohide="true"` : \'\'}>\n                    <div class="toast-header">\n                        <img src="/static/pickaladder_logo_64.png" class="rounded mr-2" alt="Logo" style="width: 20px; height: 20px;">\n                        <strong class="mr-auto">pickaladder</strong>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${message}\n                        ${progressBar}\n                    </div>\n                </div>\n            `;\n            toastContainer.insertAdjacentHTML(\'beforeend\', toastHTML);\n            const newToast = document.getElementById(toastId);\n            $(newToast).toast(\'show\');\n            return toastId;\n        }\n\n        function updateToast(toastId, message, category) {\n            const toastElement = document.getElementById(toastId);\n            if (!toastElement) return;\n\n            const toastBody = toastElement.querySelector(\'.toast-body\');\n\n            // Remove progress bar\n            const progressBar = toastBody.querySelector(\'.progress\');\n            if (progressBar) {\n                progressBar.remove();\n            }\n\n            toastBody.innerHTML = message;\n\n            // Add a retry button for failed submissions\n            if (category === \'danger\') {\n                const retryButton = document.createElement(\'button\');\n                retryButton.className = \'btn btn-sm btn-link\';\n                retryButton.innerText = \'Retry\';\n                retryButton.onclick = function () {\n                    window.optimisticSubmission.retrySubmission(toastId);\n                };\n                toastBody.appendChild(document.createElement(\'br\'));\n                toastBody.appendChild(retryButton);\n            }\n\n            $(toastElement).data(\'autohide\', true);\n            $(toastElement).data(\'delay\', 5000);\n\n            // Hack to restart the autohide timer\n            $(toastElement).toast(\'hide\');\n            $(toastElement).toast(\'show\');\n        }\n\n        document.addEventListener("click", (e) => {\n            const row = e.target.closest(".clickable-row");\n            if (row && row.dataset.href && !e.target.closest("a") && !e.target.closest("button") && !e.target.closest("input")) {\n                window.location.href = row.dataset.href;\n            }\n        });\n\n        const hamburger = document.querySelector(\'.hamburger-menu\');\n        const mobileNav = document.getElementById(\'myLinks\');\n        if (hamburger && mobileNav) {\n            hamburger.addEventListener(\'click\', function () {\n                mobileNav.classList.toggle(\'active\');\n            });\n        }\n    </script>\n\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>\n    <script>\n        const firebaseConfig = {\n            apiKey: "dummy-test-key",\n            authDomain: "pickaladder.firebaseapp.com",\n            projectId: "pickaladder",\n            storageBucket: "pickaladder.appspot.com",\n            messagingSenderId: "402457219675",\n            appId: "1:402457219675:web:a346e2dc0dfa732d31e57e",\n            measurementId: "G-E28CXCXTSK"\n        };\n        // Intercept fetch to add the auth token\n        const originalFetch = window.fetch;\n        window.fetch = function (url, options) {\n            const token = localStorage.getItem(\'firebaseIdToken\');\n            if (token) {\n                options = options || {};\n                options.headers = options.headers || {};\n                options.headers[\'Authorization\'] = \'Bearer \' + token;\n            }\n            return originalFetch(url, options);\n        };\n\n        // Initialize Firebase\n        firebase.initializeApp(firebaseConfig);\n    </script>\n\n    \n</body>\n\n</html>'

tests/test_match.py:246: AssertionError
=========================== short test summary info ============================
FAILED tests/test_match.py::MatchRoutesFirebaseTestCase::test_view_match_summary - AssertionError: b'11 - 5' not found in b'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta name="csrf-token" content="ImVlZmQ1YzRhOWJmYTc4OTQyOTNkMDg3ZWQ3MGU0Y2MyNzU4NTJiZWUi.aYux2w._iJOwV8pcDOZFZ5zGra68jYwUTE">\n    <title>pickaladder - Match Summary</title>\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link\n        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&display=swap"\n        rel="stylesheet">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n    <link rel="icon" href="/static/pickaladder_logo_64.png" type="image/png" sizes="64x64">\n    <link rel="icon" href="/static/pickaladder_logo_128.png" type="image/png"\n        sizes="128x128">\n    <link rel="icon" href="/static/pickaladder_logo_256.png" type="image/png"\n        sizes="256x256">\n    <link rel="icon" href="/static/pickaladder_logo_512.png" type="image/png"\n        sizes="512x512">\n    <link rel="stylesheet" href="/static/css/variables.css">\n    <link rel="stylesheet" href="/static/css/layout.css">\n    <link rel="stylesheet" href="/static/css/components.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">\n    <link rel="stylesheet" href="/static/style.css">\n    <link rel="stylesheet" href="/static/dark.css">\n    <link rel="stylesheet" href="/static/mobile.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n</head>\n\n<body >\n    \n\n<header class="header">\n    <div class="container">\n        <!-- Mobile Header -->\n        <div class="d-flex justify-content-between align-items-center d-lg-none w-100">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <button class="hamburger-menu">\n                <span></span>\n                <span></span>\n                <span></span>\n            </button>\n        </div>\n\n        <!-- Desktop Navbar -->\n        <nav class="navbar d-none d-lg-flex">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <div class="navbar-menu">\n                \n                <a href="/user/dashboard"\n                    class="nav-link ">\xf0\x9f\x93\x88 Dashboard</a>\n                <a href="/user/community"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8c\x8d Community\n                    \n                </a>\n                <a href="/group/"\n                    class="nav-link ">\xf0\x9f\x91\xa8\xe2\x80\x8d\xf0\x9f\x91\xa9\xe2\x80\x8d\xf0\x9f\x91\xa7\xe2\x80\x8d\xf0\x9f\x91\xa6 Groups</a>\n                <a href="/tournaments/"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8e\xbe Tournaments\n                    \n                </a>\n                <a href="/match/leaderboard"\n                    class="nav-link ">\xf0\x9f\x8f\x86 Leaderboard</a>\n                \n            </div>\n            <div class="navbar-user-controls">\n                \n                <div class="dropdown">\n                    <button class="dropbtn">\n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Profile Picture" class="avatar avatar-sm"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                    </button>\n                    <div class="dropdown-content">\n                        <a href="/user/winner_uid">\xf0\x9f\x91\xa4 My Profile</a>\n                        <a href="/auth/change_password">\xf0\x9f\x94\x91 Settings / Change Password</a>\n                        \n                        <div class="dropdown-divider"></div>\n                        <a href="/auth/logout">\xf0\x9f\x9a\xaa Logout</a>\n                    </div>\n                </div>\n                \n            </div>\n        </nav>\n        <div id="myLinks" class="mobile-nav d-lg-none">\n            \n            <a href="/user/dashboard" class="mobile-nav-link"><i class="fas fa-home me-2"></i> Dashboard</a>\n            <a href="/user/community" class="mobile-nav-link"><i class="fas fa-users me-2"></i> Community</a>\n            <a href="/group/" class="mobile-nav-link"><i class="fas fa-layer-group me-2"></i> Groups</a>\n            <a href="/tournaments/" class="mobile-nav-link"><i class="fas fa-trophy me-2"></i> Tournaments</a>\n            <a href="/match/leaderboard" class="mobile-nav-link"><i class="fas fa-chart-line me-2"></i> Leaderboard</a>\n            <div class="mobile-nav-divider"></div>\n            <a href="/user/winner_uid" class="mobile-nav-link"><i class="fas fa-user me-2"></i> My Profile</a>\n            <a href="/auth/change_password" class="mobile-nav-link"><i class="fas fa-cog me-2"></i> Settings</a>\n            \n            <a href="/auth/logout" class="mobile-nav-link"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>\n            \n        </div>\n    </div>\n</header>\n    <div class="container">\n        <main class="main-content">\n            \n            \n            \n            \n            \n<div class="container">\n    <div class="page-header text-center mb-5">\n        <h1>Match Summary</h1>\n        <p class="text-muted">February 10, 2026</p>\n    </div>\n\n    \n    <!-- Singles View -->\n    <div class="row justify-content-center">\n        \n            \n            \n            \n            \n            \n            \n        \n\n        <div class="col-md-5 mb-4">\n            <div class="card text-center h-100 border-success shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-success mb-3">Winner</div>\n                    <a href="/user/%3CMagicMock%20name=&#39;mock.get().to_dict().id&#39;%20id=&#39;139790455764128&#39;%3E">\n                        <img src="" alt="&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456412384&#39;&gt;"\n                            class="avatar avatar-xl mb-3"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        <h3>&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456412384&#39;&gt;</h3>\n                    </a>\n                    <p class="text-muted">Record: 0 - 0</p>\n                    <div class="score-display score-win">11</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-2 d-flex align-items-center justify-content-center mb-4">\n            <div class="h2 text-muted">VS</div>\n        </div>\n\n        <div class="col-md-5 mb-4">\n            <div class="card text-center h-100 shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-neutral mb-3">Loser</div>\n                    <a href="/user/%3CMagicMock%20name=&#39;mock.get().to_dict().id&#39;%20id=&#39;139790455777296&#39;%3E">\n                        <img src="" alt="&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456103680&#39;&gt;"\n                            class="avatar avatar-xl mb-3"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        <h3>&lt;MagicMock name=&#39;mock.get().to_dict().name&#39; id=&#39;139790456103680&#39;&gt;</h3>\n                    </a>\n                    <p class="text-muted">Record: 0 - 0</p>\n                    <div class="score-display score-loss">5</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-center mt-5">\n        <a href="/match/record?match_type=singles&amp;player1=winner_uid&amp;player2=loser_uid"\n           class="btn btn-volt btn-lg w-auto px-5">Rematch!</a>\n    </div>\n    \n\n    <div class="text-center mt-3">\n        <a href="/user/dashboard" class="btn btn-outline-secondary w-auto px-5">Back to Dashboard</a>\n    </div>\n</div>\n\n<style>\n    .gap-2 { gap: 0.5rem !important; }\n    .border-success { border-color: var(--success-color) !important; border-width: 2px !important; }\n    .score-display { font-size: 3rem; }\n    @media (max-width: 768px) {\n        .col-md-2 { display: none !important; }\n        .score-display { font-size: 2.5rem; }\n    }\n</style>\n\n        </main>\n    </div>\n\n    <footer class="footer mt-auto py-3">\n    <div class="container text-center">\n        <span class="text-muted">\n            &copy; 2026 Pick-A-Ladder \n            <span class="mx-2">|</span>\n            v0.9.33\n        </span>\n    </div>\n</footer>\n\n    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>\n    <script>\n        $(document).ready(function () {\n            $(\'.toast\').toast(\'show\');\n        });\n\n        function showToast(message, category = \'info\', submissionId = null) {\n            const toastContainer = document.querySelector(\'.toast-container\');\n            if (!toastContainer) return;\n\n            const toastId = submissionId || `toast_${Date.now()}`;\n            const autohide = category !== \'info\'; // Don\'t autohide pending toasts\n            const delay = 5000;\n\n            let progressBar = \'\';\n            if (category === \'info\') {\n                progressBar = \'<div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div></div>\';\n            }\n\n            const toastHTML = `\n                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true" ${autohide ? `data-delay="${delay}" data-autohide="true"` : \'\'}>\n                    <div class="toast-header">\n                        <img src="/static/pickaladder_logo_64.png" class="rounded mr-2" alt="Logo" style="width: 20px; height: 20px;">\n                        <strong class="mr-auto">pickaladder</strong>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${message}\n                        ${progressBar}\n                    </div>\n                </div>\n            `;\n            toastContainer.insertAdjacentHTML(\'beforeend\', toastHTML);\n            const newToast = document.getElementById(toastId);\n            $(newToast).toast(\'show\');\n            return toastId;\n        }\n\n        function updateToast(toastId, message, category) {\n            const toastElement = document.getElementById(toastId);\n            if (!toastElement) return;\n\n            const toastBody = toastElement.querySelector(\'.toast-body\');\n\n            // Remove progress bar\n            const progressBar = toastBody.querySelector(\'.progress\');\n            if (progressBar) {\n                progressBar.remove();\n            }\n\n            toastBody.innerHTML = message;\n\n            // Add a retry button for failed submissions\n            if (category === \'danger\') {\n                const retryButton = document.createElement(\'button\');\n                retryButton.className = \'btn btn-sm btn-link\';\n                retryButton.innerText = \'Retry\';\n                retryButton.onclick = function () {\n                    window.optimisticSubmission.retrySubmission(toastId);\n                };\n                toastBody.appendChild(document.createElement(\'br\'));\n                toastBody.appendChild(retryButton);\n            }\n\n            $(toastElement).data(\'autohide\', true);\n            $(toastElement).data(\'delay\', 5000);\n\n            // Hack to restart the autohide timer\n            $(toastElement).toast(\'hide\');\n            $(toastElement).toast(\'show\');\n        }\n\n        document.addEventListener("click", (e) => {\n            const row = e.target.closest(".clickable-row");\n            if (row && row.dataset.href && !e.target.closest("a") && !e.target.closest("button") && !e.target.closest("input")) {\n                window.location.href = row.dataset.href;\n            }\n        });\n\n        const hamburger = document.querySelector(\'.hamburger-menu\');\n        const mobileNav = document.getElementById(\'myLinks\');\n        if (hamburger && mobileNav) {\n            hamburger.addEventListener(\'click\', function () {\n                mobileNav.classList.toggle(\'active\');\n            });\n        }\n    </script>\n\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>\n    <script>\n        const firebaseConfig = {\n            apiKey: "dummy-test-key",\n            authDomain: "pickaladder.firebaseapp.com",\n            projectId: "pickaladder",\n            storageBucket: "pickaladder.appspot.com",\n            messagingSenderId: "402457219675",\n            appId: "1:402457219675:web:a346e2dc0dfa732d31e57e",\n            measurementId: "G-E28CXCXTSK"\n        };\n        // Intercept fetch to add the auth token\n        const originalFetch = window.fetch;\n        window.fetch = function (url, options) {\n            const token = localStorage.getItem(\'firebaseIdToken\');\n            if (token) {\n                options = options || {};\n                options.headers = options.headers || {};\n                options.headers[\'Authorization\'] = \'Bearer \' + token;\n            }\n            return originalFetch(url, options);\n        };\n\n        // Initialize Firebase\n        firebase.initializeApp(firebaseConfig);\n    </script>\n\n    \n</body>\n\n</html>'
FAILED tests/test_match.py::MatchRoutesFirebaseTestCase::test_view_match_summary_doubles - AssertionError: b'11 - 5' not found in b'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta name="csrf-token" content="IjQ4YjEyNDg1MDAwZGM3MWVjYTI2Y2JkZWYxNjQwYjhiZWM2Y2E0Mjgi.aYux2w.iMymD4gWv_iX6a02-2PodvF4500">\n    <title>pickaladder - Match Summary</title>\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link\n        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Oswald:wght@300;400;500;600;700&display=swap"\n        rel="stylesheet">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n    <link rel="icon" href="/static/pickaladder_logo_64.png" type="image/png" sizes="64x64">\n    <link rel="icon" href="/static/pickaladder_logo_128.png" type="image/png"\n        sizes="128x128">\n    <link rel="icon" href="/static/pickaladder_logo_256.png" type="image/png"\n        sizes="256x256">\n    <link rel="icon" href="/static/pickaladder_logo_512.png" type="image/png"\n        sizes="512x512">\n    <link rel="stylesheet" href="/static/css/variables.css">\n    <link rel="stylesheet" href="/static/css/layout.css">\n    <link rel="stylesheet" href="/static/css/components.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">\n    <link rel="stylesheet" href="/static/style.css">\n    <link rel="stylesheet" href="/static/dark.css">\n    <link rel="stylesheet" href="/static/mobile.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">\n</head>\n\n<body >\n    \n\n<header class="header">\n    <div class="container">\n        <!-- Mobile Header -->\n        <div class="d-flex justify-content-between align-items-center d-lg-none w-100">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <button class="hamburger-menu">\n                <span></span>\n                <span></span>\n                <span></span>\n            </button>\n        </div>\n\n        <!-- Desktop Navbar -->\n        <nav class="navbar d-none d-lg-flex">\n            \n<a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">\n    <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo"\n        style="height: 24px; margin-right: 8px;">\n    pickaladder\n</a>\n\n            <div class="navbar-menu">\n                \n                <a href="/user/dashboard"\n                    class="nav-link ">\xf0\x9f\x93\x88 Dashboard</a>\n                <a href="/user/community"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8c\x8d Community\n                    \n                </a>\n                <a href="/group/"\n                    class="nav-link ">\xf0\x9f\x91\xa8\xe2\x80\x8d\xf0\x9f\x91\xa9\xe2\x80\x8d\xf0\x9f\x91\xa7\xe2\x80\x8d\xf0\x9f\x91\xa6 Groups</a>\n                <a href="/tournaments/"\n                    class="nav-link "\n                    style="position: relative;">\n                    \xf0\x9f\x8e\xbe Tournaments\n                    \n                </a>\n                <a href="/match/leaderboard"\n                    class="nav-link ">\xf0\x9f\x8f\x86 Leaderboard</a>\n                \n            </div>\n            <div class="navbar-user-controls">\n                \n                <div class="dropdown">\n                    <button class="dropbtn">\n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Profile Picture" class="avatar avatar-sm"\n                            onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                    </button>\n                    <div class="dropdown-content">\n                        <a href="/user/winner_uid">\xf0\x9f\x91\xa4 My Profile</a>\n                        <a href="/auth/change_password">\xf0\x9f\x94\x91 Settings / Change Password</a>\n                        \n                        <div class="dropdown-divider"></div>\n                        <a href="/auth/logout">\xf0\x9f\x9a\xaa Logout</a>\n                    </div>\n                </div>\n                \n            </div>\n        </nav>\n        <div id="myLinks" class="mobile-nav d-lg-none">\n            \n            <a href="/user/dashboard" class="mobile-nav-link"><i class="fas fa-home me-2"></i> Dashboard</a>\n            <a href="/user/community" class="mobile-nav-link"><i class="fas fa-users me-2"></i> Community</a>\n            <a href="/group/" class="mobile-nav-link"><i class="fas fa-layer-group me-2"></i> Groups</a>\n            <a href="/tournaments/" class="mobile-nav-link"><i class="fas fa-trophy me-2"></i> Tournaments</a>\n            <a href="/match/leaderboard" class="mobile-nav-link"><i class="fas fa-chart-line me-2"></i> Leaderboard</a>\n            <div class="mobile-nav-divider"></div>\n            <a href="/user/winner_uid" class="mobile-nav-link"><i class="fas fa-user me-2"></i> My Profile</a>\n            <a href="/auth/change_password" class="mobile-nav-link"><i class="fas fa-cog me-2"></i> Settings</a>\n            \n            <a href="/auth/logout" class="mobile-nav-link"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>\n            \n        </div>\n    </div>\n</header>\n    <div class="container">\n        <main class="main-content">\n            \n            \n            \n            \n            \n<div class="container">\n    <div class="page-header text-center mb-5">\n        <h1>Match Summary</h1>\n        <p class="text-muted">February 10, 2026</p>\n    </div>\n\n    \n    <!-- Doubles View -->\n    <div class="row justify-content-center">\n        \n            \n            \n            \n            \n        \n\n        <div class="col-md-6 mb-4">\n            <div class="card text-center h-100 border-success shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-success mb-3">Winners</div>\n                    <div class="d-flex justify-content-center gap-2 mb-3">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                    </div>\n                    <h3 class="mb-1">Some User & Some User</h3>\n                    <div class="score-display score-win mt-3">11</div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-6 mb-4">\n            <div class="card text-center h-100 shadow-sm">\n                <div class="card-body">\n                    <div class="badge badge-neutral mb-3">Losers</div>\n                    <div class="d-flex justify-content-center gap-2 mb-3">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                        <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=User" alt="Some User" class="avatar avatar-lg"\n                             onerror="this.onerror=null;this.src=\'/static/user_icon.png\';">\n                        \n                    </div>\n                    <h3 class="mb-1 text-muted">Some User & Some User</h3>\n                    <div class="score-display score-loss mt-3">5</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-center mt-5">\n        <a href="/match/record?match_type=doubles&amp;player1=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player2=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player3=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E&amp;player4=%3CMagicMock+name%3D&#39;mock.id&#39;+id%3D&#39;139790454770864&#39;%3E"\n           class="btn btn-volt btn-lg w-auto px-5" data-testid="rematch-btn">Rematch!</a>\n    </div>\n\n    \n\n    <div class="text-center mt-3">\n        <a href="/user/dashboard" class="btn btn-outline-secondary w-auto px-5">Back to Dashboard</a>\n    </div>\n</div>\n\n<style>\n    .gap-2 { gap: 0.5rem !important; }\n    .border-success { border-color: var(--success-color) !important; border-width: 2px !important; }\n    .score-display { font-size: 3rem; }\n    @media (max-width: 768px) {\n        .col-md-2 { display: none !important; }\n        .score-display { font-size: 2.5rem; }\n    }\n</style>\n\n        </main>\n    </div>\n\n    <footer class="footer mt-auto py-3">\n    <div class="container text-center">\n        <span class="text-muted">\n            &copy; 2026 Pick-A-Ladder \n            <span class="mx-2">|</span>\n            v0.9.33\n        </span>\n    </div>\n</footer>\n\n    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>\n    <script>\n        $(document).ready(function () {\n            $(\'.toast\').toast(\'show\');\n        });\n\n        function showToast(message, category = \'info\', submissionId = null) {\n            const toastContainer = document.querySelector(\'.toast-container\');\n            if (!toastContainer) return;\n\n            const toastId = submissionId || `toast_${Date.now()}`;\n            const autohide = category !== \'info\'; // Don\'t autohide pending toasts\n            const delay = 5000;\n\n            let progressBar = \'\';\n            if (category === \'info\') {\n                progressBar = \'<div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div></div>\';\n            }\n\n            const toastHTML = `\n                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true" ${autohide ? `data-delay="${delay}" data-autohide="true"` : \'\'}>\n                    <div class="toast-header">\n                        <img src="/static/pickaladder_logo_64.png" class="rounded mr-2" alt="Logo" style="width: 20px; height: 20px;">\n                        <strong class="mr-auto">pickaladder</strong>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${message}\n                        ${progressBar}\n                    </div>\n                </div>\n            `;\n            toastContainer.insertAdjacentHTML(\'beforeend\', toastHTML);\n            const newToast = document.getElementById(toastId);\n            $(newToast).toast(\'show\');\n            return toastId;\n        }\n\n        function updateToast(toastId, message, category) {\n            const toastElement = document.getElementById(toastId);\n            if (!toastElement) return;\n\n            const toastBody = toastElement.querySelector(\'.toast-body\');\n\n            // Remove progress bar\n            const progressBar = toastBody.querySelector(\'.progress\');\n            if (progressBar) {\n                progressBar.remove();\n            }\n\n            toastBody.innerHTML = message;\n\n            // Add a retry button for failed submissions\n            if (category === \'danger\') {\n                const retryButton = document.createElement(\'button\');\n                retryButton.className = \'btn btn-sm btn-link\';\n                retryButton.innerText = \'Retry\';\n                retryButton.onclick = function () {\n                    window.optimisticSubmission.retrySubmission(toastId);\n                };\n                toastBody.appendChild(document.createElement(\'br\'));\n                toastBody.appendChild(retryButton);\n            }\n\n            $(toastElement).data(\'autohide\', true);\n            $(toastElement).data(\'delay\', 5000);\n\n            // Hack to restart the autohide timer\n            $(toastElement).toast(\'hide\');\n            $(toastElement).toast(\'show\');\n        }\n\n        document.addEventListener("click", (e) => {\n            const row = e.target.closest(".clickable-row");\n            if (row && row.dataset.href && !e.target.closest("a") && !e.target.closest("button") && !e.target.closest("input")) {\n                window.location.href = row.dataset.href;\n            }\n        });\n\n        const hamburger = document.querySelector(\'.hamburger-menu\');\n        const mobileNav = document.getElementById(\'myLinks\');\n        if (hamburger && mobileNav) {\n            hamburger.addEventListener(\'click\', function () {\n                mobileNav.classList.toggle(\'active\');\n            });\n        }\n    </script>\n\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>\n    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>\n    <script>\n        const firebaseConfig = {\n            apiKey: "dummy-test-key",\n            authDomain: "pickaladder.firebaseapp.com",\n            projectId: "pickaladder",\n            storageBucket: "pickaladder.appspot.com",\n            messagingSenderId: "402457219675",\n            appId: "1:402457219675:web:a346e2dc0dfa732d31e57e",\n            measurementId: "G-E28CXCXTSK"\n        };\n        // Intercept fetch to add the auth token\n        const originalFetch = window.fetch;\n        window.fetch = function (url, options) {\n            const token = localStorage.getItem(\'firebaseIdToken\');\n            if (token) {\n                options = options || {};\n                options.headers = options.headers || {};\n                options.headers[\'Authorization\'] = \'Bearer \' + token;\n            }\n            return originalFetch(url, options);\n        };\n\n        // Initialize Firebase\n        firebase.initializeApp(firebaseConfig);\n    </script>\n\n    \n</body>\n\n</html>'
========================= 2 failed, 4 passed in 0.92s ==========================
