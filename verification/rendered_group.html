<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="ImYyY2EwZDhhMGY1MjM2Y2U2YWRhODhjOGQ0MTljYmE5OTcyMWRkM2Ii.aYI4mw.haWH36ESnMSZa7ANbpRSyKcliks">
    <title>pickaladder - Test Group</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <link rel="icon" href="/static/pickaladder_logo_64.png" type="image/png" sizes="64x64">
    <link rel="icon" href="/static/pickaladder_logo_128.png" type="image/png" sizes="128x128">
    <link rel="icon" href="/static/pickaladder_logo_256.png" type="image/png" sizes="256x256">
    <link rel="icon" href="/static/pickaladder_logo_512.png" type="image/png" sizes="512x512">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/dark.css">
    <link rel="stylesheet" href="/static/mobile.css">
</head>
<body class="">
    <header class="header">
    <div class="container">
        <nav class="navbar">
            <a href="/user/dashboard" class="navbar-brand" style="display: flex; align-items: center;">
                <img src="/static/pickaladder_logo_64.png" alt="pickaladder logo" style="height: 24px; margin-right: 8px;">
                pickaladder
            </a>
            <div class="navbar-menu">

                    <a href="/user/dashboard">üìà Dashboard</a>
                    <a href="/user/users">üë• Users</a>
                    <a href="/user/friends">üßë‚Äçü§ù‚Äçüßë Friends</a>
                    <a href="/group/">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Groups</a>
                    <a href="/match/leaderboard">üèÜ Global Leaderboard</a>

            </div>
            <div class="navbar-user-controls">

                    <div class="dropdown">
                        <button class="dropbtn">
                            <img src="" alt="Profile Picture" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                        </button>
                        <div class="dropdown-content">
                            <a href="/user/dashboard">üìà Dashboard</a>
                            <a href="/user/users">üë• Users</a>
                            <a href="/user/friends">üßë‚Äçü§ù‚Äçüßë Friends</a>
                            <a href="/group/">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Groups</a>
                            <a href="/match/leaderboard">üèÜ Global Leaderboard</a>
                            <hr>
                            <a href="/auth/change_password">üîë Change Password</a>
                            <a href="/auth/logout">üö™ Logout</a>

                        </div>
                    </div>

                <button class="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>
    </div>
</header>
    <div class="container">
        <main class="main-content">




<div class="page-header group-header-content">
    <img src="/static/user_icon.png" alt="Group Picture" class="group-profile-picture">
    <div>
        <div class="group-header-actions">
            <div class="group-header-title">
                <h1>Test Group</h1>

                    <a href="/match/record?group_id=group1" class="btn btn-primary">Record a Match</a>

            </div>

                <a href="/group/group1/edit" title="Group Settings" class="settings-icon">‚öôÔ∏è</a>

        </div>
        <div class="group-meta-info">
            <p>Owned by: <a href="/user/user1">owneruser</a></p>

        </div>
        <p class="group-description">A group for testing</p>
    </div>
</div>

<div class="grid-container">

    <div>
        <div class="card">
            <h3>Group Leaderboard</h3>
            <p>A live ranking of all group members.</p>

            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="openTab(event, 'players')">Players</button>
                    <button class="tab-button" onclick="openTab(event, 'teams')">Teams</button>
                </div>

                <div id="players" class="tab-content" style="display: block;">
                    <div class="leaderboard-container">
                        <div class="leaderboard-header">
                            <div class="leaderboard-cell">Rank</div>
                            <div class="leaderboard-cell">Player</div>
                            <div class="leaderboard-cell">Avg. Score</div>
                            <div class="leaderboard-cell">Form</div>
                            <div class="leaderboard-cell">Games</div>
                        </div>
                        <div class="leaderboard-body">

                            <div class="leaderboard-row highlight-user">
                                <div class="leaderboard-cell" data-label="Rank">
                                    <div class="player-rank">
                                        <span>
                                            ü•á

                                        </span>
                                        <span class="rank-trend">

                                                <span class="trend-up">‚ñ≤</span>

                                        </span>
                                    </div>
                                </div>
                                <div class="leaderboard-cell" data-label="Player">
                                    <a href="/user/user1" class="player-link">
                                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user1&amp;backgroundColor=2e7d32,ffc107,1976d2" alt="Player One" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                                        <span class="player-name">
                                            Player One

                                                <span title="5 Game Streak!">üî•</span>

                                        </span>
                                    </a>
                                </div>
                                <div class="leaderboard-cell" data-label="Avg. Score">10.50</div>
                                <div class="leaderboard-cell" data-label="Form">
                                    <div class="form-dots">

                                            <span class="form-dot win"></span>

                                            <span class="form-dot loss"></span>

                                            <span class="form-dot win"></span>

                                    </div>
                                </div>
                                <div class="leaderboard-cell" data-label="Games">3</div>
                            </div>

                        </div>
                    </div>
                </div>

                <div id="teams" class="tab-content" style="display: none;">
                    <div class="leaderboard-container">
                        <div class="leaderboard-header">
                            <div class="leaderboard-cell">Rank</div>
                            <div class="leaderboard-cell">Team</div>
                            <div class="leaderboard-cell">Win %</div>
                            <div class="leaderboard-cell">Record</div>
                            <div class="leaderboard-cell">Games</div>
                        </div>
                        <div class="leaderboard-body">

                            <div class="leaderboard-row">
                                <div class="leaderboard-cell" data-label="Rank">
                                    <div class="player-rank">
                                        <span>
                                            ü•á

                                        </span>
                                    </div>
                                </div>
                                <div class="leaderboard-cell" data-label="Team">
                                    <div class="team-members">

                                            <a href="/user/user1" class="player-link">
                                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user1&amp;backgroundColor=2e7d32,ffc107,1976d2" alt="Player One" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                                            </a>

                                            <a href="/user/user2" class="player-link">
                                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user2&amp;backgroundColor=2e7d32,ffc107,1976d2" alt="Player Two" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                                            </a>

                                        <span class="team-name">The Dream Team</span>
                                    </div>
                                </div>
                                <div class="leaderboard-cell" data-label="Win %">75.0%</div>
                                <div class="leaderboard-cell" data-label="Record">3-1</div>
                                <div class="leaderboard-cell" data-label="Games">4</div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="leaderboard-trend-link">
                <a href="/group/group1/leaderboard-trend">View Leaderboard Trend Chart</a>
            </div>
        </div>
    </div>

    <div>

        <div class="card best-buds-card">
            <h3>üëØ Best Buds</h3>
            <div class="best-buds-container">

                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user1&amp;backgroundColor=2e7d32,ffc107,1976d2" alt="Bestie 1" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                    <span class="plus-sign">+</span>

                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user2&amp;backgroundColor=2e7d32,ffc107,1976d2" alt="Bestie 2" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">


            </div>
            <p>

                    Bestie 1 & Bestie 2
                : 15 Wins Together!
            </p>
        </div>




        <div class="card">
            <h3>Recent Matches</h3>
            <div class="table-container">
                <table class="table responsive-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Team 1</th>
                            <th>Team 2</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td data-label="Date">2026-02-03</td>
                            <td data-label="Team 1">

                                    Team A



                                    <span title="Giant Slayer! Beat a higher-ranked opponent.">üó°Ô∏è</span>

                            </td>
                            <td data-label="Team 2">

                                    Team B



                            </td>
                            <td data-label="Score" class="upset-score">
                                11 - 9

                                    <span class="badge badge-close-call">Close Call</span>


                                    <span class="badge badge-upset">üî• Upset</span>

                            </td>
                        </tr>

                        <tr>
                            <td data-label="Date">2026-02-03</td>
                            <td data-label="Team 1">

                                    Team C



                            </td>
                            <td data-label="Team 2">

                                    Team D



                            </td>
                            <td data-label="Score" class="">
                                11 - 2


                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>

<div class="manage-group-section">
    <details class="card manage-group-card">
        <summary class="manage-group-summary">Manage Group & Members (2)</summary>
        <div class="manage-group-content">
            <h3>Members</h3>
            <div class="table-container">
                <table class="table responsive-table">
                    <tbody>

                        <tr class="clickable-row" data-href="/user/user1">
                            <td data-label="Avatar">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user1&amp;backgroundColor=2e7d32,ffc107,1976d2"
                                    alt="Profile Picture" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                            </td>
                            <td data-label="Username">player1</td>
                        </tr>

                        <tr class="clickable-row" data-href="/user/user2">
                            <td data-label="Avatar">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=user2&amp;backgroundColor=2e7d32,ffc107,1976d2"
                                    alt="Profile Picture" class="profile-picture-thumbnail avatar" onerror="this.onerror=null;this.src='/static/user_icon.png';">
                            </td>
                            <td data-label="Username">player2</td>
                        </tr>

                    </tbody>
                </table>
            </div>


            <h3>Invite Friends</h3>
            <form method="post" action="/group/group1">

                <div class="form-group">
                    <label for="friend">Friend</label>
                    <select class="form-control" id="friend" name="friend" required></select>
                </div>
                <input type="submit" value="Invite Friend" class="btn">
            </form>

            <h3>Invite by Email</h3>
            <form method="post" action="/group/group1">

                <div class="form-group">
                    <label for="name">Name</label>
                    <input class="form-control" id="name" name="name" type="text" value="">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input class="form-control" id="email" name="email" required type="text" value="">
                </div>
                <input type="submit" value="Send Invite" class="btn">
            </form>

            <h3>Danger Zone</h3>
            <form method="post" action="/group/group1/delete">
                <input type="hidden" name="csrf_token" value="ImYyY2EwZDhhMGY1MjM2Y2U2YWRhODhjOGQ0MTljYmE5OTcyMWRkM2Ii.aYI4mw.haWH36ESnMSZa7ANbpRSyKcliks">
                <input type="submit" value="Delete Group" class="btn btn-danger"
                    onclick="return confirm('Are you sure you want to permanently delete this group? This action cannot be undone.')">
            </form>

        </div>
    </details>
</div>



<script>
function openTab(evt, tabName) {
    var i, tabcontent, tabbuttons;
    tabcontent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tabbuttons = document.getElementsByClassName("tab-button");
    for (i = 0; i < tabbuttons.length; i++) {
        tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

</script>

    </div>
    <footer class="footer">
    <div class="container">
        <p>&copy; 2025 pickaladder. All rights reserved. | Version: dev</p>
    </div>
</footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function(){
            $('.toast').toast('show');
        });

        function showToast(message, category = 'info', submissionId = null) {
            const toastContainer = document.querySelector('.toast-container');
            if (!toastContainer) return;

            const toastId = submissionId || `toast_${Date.now()}`;
            const autohide = category !== 'info'; // Don't autohide pending toasts
            const delay = 5000;

            let progressBar = '';
            if (category === 'info') {
                progressBar = '<div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div></div>';
            }

            const toastHTML = `
                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true" ${autohide ? `data-delay="${delay}" data-autohide="true"` : ''}>
                    <div class="toast-header">
                        <img src="/static/pickaladder_logo_64.png" class="rounded mr-2" alt="Logo" style="width: 20px; height: 20px;">
                        <strong class="mr-auto">pickaladder</strong>
                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="toast-body">
                        ${message}
                        ${progressBar}
                    </div>
                </div>
            `;
            toastContainer.insertAdjacentHTML('beforeend', toastHTML);
            const newToast = document.getElementById(toastId);
            $(newToast).toast('show');
            return toastId;
        }

        function updateToast(toastId, message, category) {
            const toastElement = document.getElementById(toastId);
            if (!toastElement) return;

            const toastBody = toastElement.querySelector('.toast-body');

            // Remove progress bar
            const progressBar = toastBody.querySelector('.progress');
            if (progressBar) {
                progressBar.remove();
            }

            toastBody.innerHTML = message;

            // Add a retry button for failed submissions
            if (category === 'danger') {
                const retryButton = document.createElement('button');
                retryButton.className = 'btn btn-sm btn-link';
                retryButton.innerText = 'Retry';
                retryButton.onclick = function() {
                    window.optimisticSubmission.retrySubmission(toastId);
                };
                toastBody.appendChild(document.createElement('br'));
                toastBody.appendChild(retryButton);
            }

            $(toastElement).data('autohide', true);
            $(toastElement).data('delay', 5000);

            // Hack to restart the autohide timer
            $(toastElement).toast('hide');
            $(toastElement).toast('show');
        }

        document.addEventListener("click", (e) => {
            const row = e.target.closest(".clickable-row");
            if (row && row.dataset.href && !e.target.closest("a") && !e.target.closest("button") && !e.target.closest("input")) {
                window.location.href = row.dataset.href;
            }
        });

        const hamburger = document.querySelector('.hamburger-menu');
        if (hamburger) {
            hamburger.addEventListener('click', function() {
                document.querySelector('.dropdown-content').classList.toggle('active');
            });
        }
    </script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "",
            authDomain: "pickaladder.firebaseapp.com",
            projectId: "pickaladder",
            storageBucket: "pickaladder.appspot.com",
            messagingSenderId: "402457219675",
            appId: "1:402457219675:web:a346e2dc0dfa732d31e57e",
            measurementId: "G-E28CXCXTSK"
        };
        // Intercept fetch to add the auth token
        const originalFetch = window.fetch;
        window.fetch = function (url, options) {
            const token = localStorage.getItem('firebaseIdToken');
            if (token) {
                options = options || {};
                options.headers = options.headers || {};
                options.headers['Authorization'] = 'Bearer ' + token;
            }
            return originalFetch(url, options);
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>


</body>
</html>